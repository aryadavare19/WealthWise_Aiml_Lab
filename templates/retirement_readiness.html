<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Retirement Readiness | WealthWise</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      background: linear-gradient(135deg, #faf5f8ff, #ff5c8a);
      min-height: 100vh;
      font-family: 'Poppins', sans-serif;
      color: #fff;
    }

    .header-title {
      text-align: center;
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 30px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }

    .card {
      border-radius: 20px;
      background: rgba(255,255,255,0.95);
      color: #333;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      padding: 30px;
      margin-bottom: 50px;
    }

    .form-label {
      font-weight: 500;
    }

    .form-text {
      font-size: 0.875rem;
      color: #6c757d;
      margin-top: 2px;
    }

    .btn-custom {
      background-color: #2a5298;
      color: #fff;
      border-radius: 30px;
      padding: 12px 30px;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .btn-custom:hover {
      background-color: #1e3c72;
      transform: translateY(-3px);
    }

    .result-box {
      background: linear-gradient(135deg, #b3adb3ff, #f5edf2ff);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      margin-top: 30px;
      color: #222;
      font-weight: 600;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }

    .result-score {
      font-size: 3rem;
      font-weight: 700;
    }

    .progress-container {
      margin-top: 20px;
    }

    .progress-bar {
      font-weight: 500;
      text-align: center;
      line-height: 2.2rem;
    }

    @media(max-width: 768px) {
      .header-title { font-size: 2.2rem; }
    }

    /* --- ‚úÖ START: CSS for Back Button --- */
    .back-btn {
      display: block;
      margin: 0 auto 35px; /* Centered with margin at the bottom */
      width: 40%;
      max-width: 300px;
      text-align: center;
      padding: 12px;
      /* Match the style of your .btn-custom */
      background: #2a5298; 
      color: white;
      text-decoration: none;
      border-radius: 30px;
      font-size: 16px;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      /* Match the hover of your .btn-custom */
      background: #1e3c72;
      transform: translateY(-3px);
    }
    /* --- ‚úÖ END: CSS for Back Button --- */

  </style>
</head>
<body>

  <div class="container py-5">

    <h1 class="header-title"><i class="fas fa-piggy-bank"></i> Retirement Readiness Predictor</h1>

    <div class="row justify-content-center">
      <div class="col-lg-7">
        <div class="card">
          
          <form action="{{ url_for('predict_retirement') }}" method="POST">

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Current Age</label>
                <input type="number" name="age" class="form-control" required value="{{ age if age is not none }}">
                <small class="form-text">Your current age in years (between 18‚Äì70)</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Planned Retirement Age</label>
                <input type="number" name="retirement_age" class="form-control" required value="{{ retirement_age if retirement_age is not none }}">
                <small class="form-text">Retirement age must be ‚â• current age</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Annual Income (‚Çπ)</label>
                <input type="number" name="income" class="form-control" required value="{{ income if income is not none }}">
                <small class="form-text">Your total yearly income before taxes (must be > 0)</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Annual Expenses (‚Çπ)</label>
                <input type="number" name="expenses" class="form-control" required value="{{ expenses if expenses is not none }}">
                <small class="form-text">Total yearly expenses including bills and living costs</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Total Savings (‚Çπ)</label>
                <input type="number" name="savings" class="form-control" required value="{{ savings if savings is not none }}">
                <small class="form-text">All current savings including bank accounts and FDs</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Current Investments (‚Çπ)</label>
                <input type="number" name="investment" class="form-control" required value="{{ investment if investment is not none }}">
                <small class="form-text">Investments in stocks, mutual funds, bonds, etc.</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Expected Annual Inflation (%)</label>
                <input type="number" step="0.1" name="inflation" class="form-control" required value="{{ inflation if inflation is not none }}">
                <small class="form-text">Average yearly increase in cost of living(2.4% to 6.5%)</small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Expected Return Rate (%)</label>
                <input type="number" step="0.1" name="return_rate" class="form-control" required value="{{ return_rate if return_rate is not none }}">
                <small class="form-text">Average annual return from investments(7.7% to 12.0%)</small>
              </div>
            </div>

            <div class="text-center mt-4">
              <button type="submit" class="btn btn-custom">
                <i class="fas fa-chart-line"></i> Predict Readiness
              </button>
            </div>

          </form>

         {% if score %}
          <div class="result-box mt-4">
            <h3 class="mb-3">üìä Your Retirement Readiness Score</h3>
            
            <p class="result-score" style="color: {{ color }}">{{ score }} / 100</p>
            <p style="color: {{ color }}; font-weight:bold;">{{ status }}</p>
            
            <small class="text-muted">Statistical Model: Multiple Linear Regression (Accuracy: ~98.5%)</small>

            <div class="progress-container mt-3">
              <div class="progress" style="height: 25px; border-radius: 15px;">
                <div class="progress-bar" role="progressbar" 
                     style="width: {{ score }}%; background-color: {{ color }};" 
                     aria-valuenow="{{ score }}" aria-valuemin="0" aria-valuemax="100">
                  {{ score }}%
                </div>
              </div>
            </div>
          </div>
          {% endif %}

        </div>
      </div>
    </div>

  </div>

  <a class="back-btn" href="{{ url_for('dashboard')  }}">‚Üê Back to Dashboard</a>
  </body>
</html>